<!DOCTYPE html>
<!--[if IE 8 ]><html class="ie ie8" lang="ru"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="ru">
<!--<![endif]-->
	<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta name="author" content="Косолапов Дмитрий">


        <title>Косолапов Дмитрий: мысли умные и не только. - treebeard выдало сообщение об ошибке</title>


        <!-- CSS -->
        <link rel="stylesheet" href="/theme/css/style.css">

        <!-- Custom CSS -->
        	<link rel="stylesheet" href="/theme/css/colors/blue.css" id="colors">

        <!-- Code highlight color scheme -->
            <link href="/theme/css/code_blocks/darkly.css" rel="stylesheet">


        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->





	                <meta property="og:locale" content="">
		<meta property="og:site_name" content="Косолапов Дмитрий: мысли умные и не только.">

	<meta property="og:type" content="article">
	<meta property="article:author" content="">
	<meta property="og:url" content="/treebeard-error.html">
	<meta property="og:title" content="treebeard выдало сообщение об ошибке">
	<meta property="og:description" content="">
	   <meta property="og:image" content="/images/guilherme-toti.jpg">
	<meta property="article:published_time" content="2010-04-25 22:58:00+07:00">
	</head>
	<body>
		<header id="header">
			<!-- Container -->
			<div class="container">
				<!-- Logo / Mobile Menu -->
				<div class="nine.columns columns">
					<div id="logo">
						<h1><a href="/">Косолапов Дмитрий: мысли умные и не только.</a></h1>
					</div>
				</div>
				<!-- Navigation
				================================================== -->
				<div class="seven columns">
					
					<nav id="navigation" class="menu">
						<ul id="responsive">

							<li><a href="/">Главная</a></li>


							        <li><a href="/about.html">Обо мне</a></li>
						</ul>
					</nav>
				</div>
			</div>
			<!-- Container / End -->
		</header>
		<!-- Header / End -->
		
		<div id="content-wrapper">
			<section id="titlebar">
				<!-- Container -->
				<div class="container">
					<div class="sixteen columns">						
						<nav id="breadcrumbs">
							<ul>
								<li>Текущее нахождение:</li>
								<li><a href="/">Главная</a></li>
<li><a href="/category/python.html">python</a></li>
<li>treebeard выдало сообщение об ошибке</li>
							</ul>
						</nav>
					</div>

				</div>
				<!-- Container / End -->
			</section>

			<div class="container">
	<div class="twelve alt columns">
<article class="post" style="margin: 0; border: 0;">
	
	<div class="post-format">
		<div class="circle"><i class="icon-pencil"></i><span></span></div>
	</div>

	<section class="post-content">

		<header class="meta">
			<h2><a href="/treebeard-error.html">treebeard выдало сообщение об ошибке</a></h2>
			<ul>
				<li>By <a href="/author/admin.html">admin</a></li>
				<li>Вс 25 Апрель 2010</li>
			</ul>
		</header>

		<p>После того, как я выложил на рабочий сервер свой проект, часть сайта,
доступная простым смертным работала нормально с тестовыми данными. Не
работала только закрытая часть, то есть админка. Вернее модуль,
позволяющий создавать страницы с текстом сообщал мне об ошибке.</p>
<blockquote>
<div class="line-block">
<div class="line">TemplateSyntaxError at /admin/pages/pages/</div>
<div class="line">Caught an exception while rendering: Failed lookup for key
[request] in u'[{\'action_index\': 0, \'block\': &lt;Block Node:
result_list. Contents: [&lt;Text Node: \'\n \'&gt;, &lt;If node&gt;, &lt;Text
Node: \'\n \'&gt;, &lt;django.template.SimpleNode object at
0x1327a890&gt;, &lt;Text Node: \'\n \'&gt;, &lt;If node&gt;, &lt;Text Node:
\'\n\'&gt;]&gt;}, {\'block\': &lt;Block Node: content. Contents:
[&lt;Text Node: \'\n &lt;div id=&quot;content-main&quot;\'&gt;, &lt;Block Node:
object-tools. Contents: [&lt;Text Node: \'\n \'&gt;, &lt;If node&gt;, &lt;Text
Node: \'\n \'&gt;]&gt;, &lt;Text Node: \'\n \'&gt;, &lt;If node&gt;, &lt;Text
Node: \'\n &lt;div class=&quot;module\'&gt;, &lt;If node&gt;, &lt;Text Node: \'&quot;
id=&quot;changelist&quot;&gt;\n \'&gt;, &lt;Block Node: search. Contents:
[&lt;django.template.InclusionNode object at 0x13243310&gt;]&gt;, &lt;Text
Node: \'\n \'&gt;, &lt;Block Node: date_hierarchy. Contents:
[&lt;django.template.InclusionNode object at 0x132430d0&gt;]&gt;, &lt;Text
Node: \'\n\n \'&gt;, &lt;Block Node: filters. Contents: [&lt;Text Node:
\'\n \'&gt;, &lt;If node&gt;, &lt;Text Node: \'\n \'&gt;]&gt;, &lt;Text Node:
\'\n \n &lt;form actio\'&gt;, &lt;If node&gt;, &lt;Text Node: \'&gt;\n \'&gt;,
&lt;If node&gt;, &lt;Text Node: \'\n\n \'&gt;, &lt;Block Node: result_list.
Contents: [&lt;Text Node: \'\n \'&gt;, &lt;If node&gt;, &lt;Text Node: \'\n
\'&gt;, &lt;django.template.SimpleNode object at 0x1327a890&gt;, &lt;Text
Node: \'\n \'&gt;, &lt;If node&gt;, &lt;Text Node: \'\n\'&gt;]&gt;, &lt;Text
Node: \'\n \'&gt;, &lt;Block Node: pagination. Contents:
[&lt;django.template.InclusionNode object at 0x13256a90&gt;]&gt;, &lt;Text
Node: \'\n &lt;/form&gt;\n &lt;/div&gt;\'&gt;]&gt;}, {\'actions_on_bottom\':
False, \'cl\': &lt;django.contrib.admin.views.main.ChangeList
object at 0x1324ec90&gt;, \'has_add_permission\': True,
\'media\': &lt;django.forms.widgets.Media object at 0x1327a450&gt;,
\'root_path\': None, \'action_form\':
&lt;django.contrib.admin.helpers.ActionForm object at 0x1327a6d0&gt;,
\'actions_on_top\': True, \'app_label\': \'pages\',
\'is_popup\': False, \'title\':
u\'\\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435
pages \\u0434\\u043b\\u044f
\\u0438\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0438\\u044f\'},
{\'this_url\': u\'/admin/pages/pages/\'}, {\'MEDIA_URL\':
\'/media/\'}, {\'LANGUAGES\': ((\'ar\', \'Arabic\'),
(\'bn\', \'Bengali\'), (\'bg\', \'Bulgarian\'), (\'ca\',
\'Catalan\'), (\'cs\', \'Czech\'), (\'cy\', \'Welsh\'),
(\'da\', \'Danish\'), (\'de\', \'German\'), (\'el\',
\'Greek\'), (\'en\', \'English\'), (\'es\',
\'Spanish\'), (\'et\', \'Estonian\'), (\'es-ar\',
\'Argentinean Spanish\'), (\'eu\', \'Basque\'), (\'fa\',
\'Persian\'), (\'fi\', \'Finnish\'), (\'fr\',
\'French\'), (\'ga\', \'Irish\'), (\'gl\',
\'Galician\'), (\'hu\', \'Hungarian\'), (\'he\',
\'Hebrew\'), (\'hi\', \'Hindi\'), (\'hr\',
\'Croatian\'), (\'is\', \'Icelandic\'), (\'it\',
\'Italian\'), (\'ja\', \'Japanese\'), (\'ka\',
\'Georgian\'), (\'ko\', \'Korean\'), (\'km\',
\'Khmer\'), (\'kn\', \'Kannada\'), (\'lv\',
\'Latvian\'), (\'lt\', \'Lithuanian\'), (\'mk\',
\'Macedonian\'), (\'nl\', \'Dutch\'), (\'no\',
\'Norwegian\'), (\'pl\', \'Polish\'), (\'pt\',
\'Portuguese\'), (\'pt-br\', \'Brazilian Portuguese\'),
(\'ro\', \'Romanian\'), (\'ru\', \'Russian\'), (\'sk\',
\'Slovak\'), (\'sl\', \'Slovenian\'), (\'sr\',
\'Serbian\'), (\'sv\', \'Swedish\'), (\'ta\',
\'Tamil\'), (\'te\', \'Telugu\'), (\'th\', \'Thai\'),
(\'tr\', \'Turkish\'), (\'uk\', \'Ukrainian\'),
(\'zh-cn\', \'Simplified Chinese\'), (\'zh-tw\',
\'Traditional Chinese\')), \'LANGUAGE_BIDI\': False,
\'LANGUAGE_CODE\': \'ru\'}, {}, {\'perms\':
&lt;django.core.context_processors.PermWrapper object at
0x1327aa50&gt;, \'messages\': [], \'user\': &lt;User: root&gt;}, {}]'</div>
<div class="line">Original Traceback (most recent call last):</div>
<div class="line">File &quot;/usr/lib/python2.5/site-packages/django/template/debug.py&quot;,
line 71, in render_node</div>
<div class="line">result = node.render(context)</div>
<div class="line">File
&quot;/usr/lib/python2.5/site-packages/django/template/__init__.py&quot;,
line 908, in render</div>
<div class="line">resolved_vars = [var.resolve(context) for var in
self.vars_to_resolve]</div>
<div class="line">File
&quot;/usr/lib/python2.5/site-packages/django/template/__init__.py&quot;,
line 687, in resolve</div>
<div class="line">value = self._resolve_lookup(context)</div>
<div class="line">File
&quot;/usr/lib/python2.5/site-packages/django/template/__init__.py&quot;,
line 740, in _resolve_lookup</div>
<div class="line">raise VariableDoesNotExist(&quot;Failed lookup for key [%s] in %r&quot;,
(bit, current)) # missing attribute</div>
<div class="line">VariableDoesNotExist: Failed lookup for key [request] in
u'[{\'action_index\': 0, \'block\': &lt;Block Node:
result_list. Contents: [&lt;Text Node: \'\n \'&gt;, &lt;If node&gt;, &lt;Text
Node: \'\n \'&gt;, &lt;django.template.SimpleNode object at
0x1327a890&gt;, &lt;Text Node: \'\n \'&gt;, &lt;If node&gt;, &lt;Text Node:
\'\n\'&gt;]&gt;}, {\'block\': &lt;Block Node: content. Contents:
[&lt;Text Node: \'\n &lt;div id=&quot;content-main&quot;\'&gt;, &lt;Block Node:
object-tools. Contents: [&lt;Text Node: \'\n \'&gt;, &lt;If node&gt;, &lt;Text
Node: \'\n \'&gt;]&gt;, &lt;Text Node: \'\n \'&gt;, &lt;If node&gt;, &lt;Text
Node: \'\n &lt;div class=&quot;module\'&gt;, &lt;If node&gt;, &lt;Text Node: \'&quot;
id=&quot;changelist&quot;&gt;\n \'&gt;, &lt;Block Node: search. Contents:
[&lt;django.template.InclusionNode object at 0x13243310&gt;]&gt;, &lt;Text
Node: \'\n \'&gt;, &lt;Block Node: date_hierarchy. Contents:
[&lt;django.template.InclusionNode object at 0x132430d0&gt;]&gt;, &lt;Text
Node: \'\n\n \'&gt;, &lt;Block Node: filters. Contents: [&lt;Text Node:
\'\n \'&gt;, &lt;If node&gt;, &lt;Text Node: \'\n \'&gt;]&gt;, &lt;Text Node:
\'\n \n &lt;form actio\'&gt;, &lt;If node&gt;, &lt;Text Node: \'&gt;\n \'&gt;,
&lt;If node&gt;, &lt;Text Node: \'\n\n \'&gt;, &lt;Block Node: result_list.
Contents: [&lt;Text Node: \'\n \'&gt;, &lt;If node&gt;, &lt;Text Node: \'\n
\'&gt;, &lt;django.template.SimpleNode object at 0x1327a890&gt;, &lt;Text
Node: \'\n \'&gt;, &lt;If node&gt;, &lt;Text Node: \'\n\'&gt;]&gt;, &lt;Text
Node: \'\n \'&gt;, &lt;Block Node: pagination. Contents:
[&lt;django.template.InclusionNode object at 0x13256a90&gt;]&gt;, &lt;Text
Node: \'\n &lt;/form&gt;\n &lt;/div&gt;\'&gt;]&gt;}, {\'actions_on_bottom\':
False, \'cl\': &lt;django.contrib.admin.views.main.ChangeList
object at 0x1324ec90&gt;, \'has_add_permission\': True,
\'media\': &lt;django.forms.widgets.Media object at 0x1327a450&gt;,
\'root_path\': None, \'action_form\':
&lt;django.contrib.admin.helpers.ActionForm object at 0x1327a6d0&gt;,
\'actions_on_top\': True, \'app_label\': \'pages\',
\'is_popup\': False, \'title\':
u\'\\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435
pages \\u0434\\u043b\\u044f
\\u0438\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0438\\u044f\'},
{\'this_url\': u\'/admin/pages/pages/\'}, {\'MEDIA_URL\':
\'/media/\'}, {\'LANGUAGES\': ((\'ar\', \'Arabic\'),
(\'bn\', \'Bengali\'), (\'bg\', \'Bulgarian\'), (\'ca\',
\'Catalan\'), (\'cs\', \'Czech\'), (\'cy\', \'Welsh\'),
(\'da\', \'Danish\'), (\'de\', \'German\'), (\'el\',
\'Greek\'), (\'en\', \'English\'), (\'es\',
\'Spanish\'), (\'et\', \'Estonian\'), (\'es-ar\',
\'Argentinean Spanish\'), (\'eu\', \'Basque\'), (\'fa\',
\'Persian\'), (\'fi\', \'Finnish\'), (\'fr\',
\'French\'), (\'ga\', \'Irish\'), (\'gl\',
\'Galician\'), (\'hu\', \'Hungarian\'), (\'he\',
\'Hebrew\'), (\'hi\', \'Hindi\'), (\'hr\',
\'Croatian\'), (\'is\', \'Icelandic\'), (\'it\',
\'Italian\'), (\'ja\', \'Japanese\'), (\'ka\',
\'Georgian\'), (\'ko\', \'Korean\'), (\'km\',
\'Khmer\'), (\'kn\', \'Kannada\'), (\'lv\',
\'Latvian\'), (\'lt\', \'Lithuanian\'), (\'mk\',
\'Macedonian\'), (\'nl\', \'Dutch\'), (\'no\',
\'Norwegian\'), (\'pl\', \'Polish\'), (\'pt\',
\'Portuguese\'), (\'pt-br\', \'Brazilian Portuguese\'),
(\'ro\', \'Romanian\'), (\'ru\', \'Russian\'), (\'sk\',
\'Slovak\'), (\'sl\', \'Slovenian\'), (\'sr\',
\'Serbian\'), (\'sv\', \'Swedish\'), (\'ta\',
\'Tamil\'), (\'te\', \'Telugu\'), (\'th\', \'Thai\'),
(\'tr\', \'Turkish\'), (\'uk\', \'Ukrainian\'),
(\'zh-cn\', \'Simplified Chinese\'), (\'zh-tw\',
\'Traditional Chinese\')), \'LANGUAGE_BIDI\': False,
\'LANGUAGE_CODE\': \'ru\'}, {}, {\'perms\':
&lt;django.core.context_processors.PermWrapper object at
0x1327aa50&gt;, \'messages\': [], \'user\': &lt;User: root&gt;}, {}]'</div>
</div>
</blockquote>
<p>Сделаю небольшое лирическое отступление,
<a class="reference external" href="https://tabo.pe/projects/django-treebeard/docs/1.60/index.html">treebeard</a>
это модуль для django, хранить информацию в виде деревьев. Для решения
задачи создания каталога страниц этот модуль очень подходит. Чем он
хорош: умеет работать по технологиям nested sets, materialized path и
adjacence list. Кроме того, у него отличная документация.</p>
<p>Так вот, из-за плохого чтения оной меня покарал Бог. На домашнем и
находящимся на работе компьютером проблем ни каких не возникало.</p>
<p>В документации четко написано, что если используете в этот модуль в
блоке администраторов, то нужно прописать путь
<a class="reference external" href="http://docs.djangoproject.com/en/dev/ref/settings/#template-dirs">TEMPLATE_DIRS</a>
до шаблонов treebeard (в моем случае это
/usr/lib/python2.5/site-packages/treebeard/templates/) а также добавить
<a class="reference external" href="http://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request">django-core-context-processors-request</a>
в
<a class="reference external" href="http://docs.djangoproject.com/en/dev/ref/settings/#template-context-processors">TEMPLATE_CONTEXT_PROCESSORS</a>.`
&lt;<a class="reference external" href="http://docs.djangoproject.com/en/dev/ref/settings/#template-context-processors">http://docs.djangoproject.com/en/dev/ref/settings/#template-context-processors</a>&gt;`__</p>



<div class="sharing">
</div>
<hr>
		
	</section>
	<div class="clearfix"></div>

</article>

	</div>

	<!-- Sidebar -->
	<div class="four columns">

		
	</div>
			</div>
			<!-- Container / End -->
		</div>
		<!-- Content Wrapper / End -->


		<div id="footer-bottom">
			<!-- Container -->
			<div class="container">
				<div class="eight columns">Blog powered by <a href="http://getpelican.com">Pelican</a></div>
					<div class="eight columns">
						<ul class="social-icons-footer">
								<li>
									<a href="#" class="tooltip top" title="You can add links in your config file">
										<i class="icon-you can add links in your config file"></i>
									</a>
								</li>
								<li>
									<a href="#" class="tooltip top" title="Another social link">
										<i class="icon-another social link"></i>
									</a>
								</li>
							<li><a href="/None" class="tooltip top" title="RSS"><i class="icon-rss"></i></a></li>
						</ul>
					</div>
			</div>
			<!-- Container / End -->
		</div>
		<!-- Footer Bottom / End -->
		
	<!-- Javascripts -->
	<script src="/theme/js/jquery.min.js"></script>
	</body>
</html>